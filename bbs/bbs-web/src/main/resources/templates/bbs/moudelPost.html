<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head lang="en">
<meta charset="UTF-8">
<title>板块信息</title>
<link rel="stylesheet" href="/bbs/css/reset.css" />
<link rel="stylesheet" href="/bbs/css/public.css" />
<link rel="stylesheet" href="/bbs/css/index.css" />
<link rel="stylesheet" href="/css/index.css" />
<script type="text/javascript" th:src="@{/js/jquery-3.3.1.min.js}"></script>
<script type="text/javascript"
	th:src="@{/js/person/personalSearching.js}"></script>
<!-- 分页部分的样式 -->
<link href="/bbs/css/bootstrap.min.css" rel="stylesheet">
<script src="/bbs/js/bootstrap.min.js" type="text/javascript"></script>
<script src="/bbs/js/bootstrap-paginator.js" type="text/javascript"></script>
</head>
<body>
	<header class="ltHead">
		<div class="ltHead_cen">
			<a href=""><img src="img/logo.png" alt="" class="headPic1" /></a>
			<ul class="headNav">
				<li><a href="/post/index">首页</a></li>
				<tr th:each="module : ${session.moduleList}">
					<li><a th:href="@{/post/moudelPost(code=${module.code})}"
						th:text="${module.moduleName}"></a></li>
				</tr>
			</ul>
			<!--未登入开始-->
			<div th:if="${session.user1==null}">
				<div class="ltForm appear">
					<a href=""><img src="img/indexForm_bg.png" alt=""
						class="headPic2" /></a>
					<ul>
						<li><a th:href="@{/user1/demo}">登录</a></li>
						<li><a th:href="@{/user1/UserRegister}">注册</a></li>
					</ul>
				</div>
			</div>
			<div th:if="${session.user1!=null}">
				<div class="lt_login appear"
					th:if="${session.user1.userName != null}">
					<ul>
						<li><a href="/index/home" class="navMe"
							th:text="${session.user1.userName}"></a></li>
						<li><a th:href="@{/user1/logOut}">退出</a></li>
					</ul>
				</div>
			</div>
			<!-- 隐藏框 -->
			<div th:if="${session.user1==null}">
				<div class="navFix">
					<a class="navLogin" th:href="@{/user1/demo}">登录</a>
				</div>
			</div>

			<div th:if="${session.user1!=null}">
				<div class="navFix">
					<a href="/index/home" class="navMe"
						th:text="${session.user1.userName}"></a> <a href="/index/write"
						class="navWrite">发新帖</a>
				</div>
			</div>
		</div>
	</header>
	<div class="indexMain">
		<div class="indexMain_left">
			<div class="indexMain_left_btn">
				<ul>
					<tr th:each="postClassList : ${session.postClass}">
						<li><a th:text="${postClassList.className}"
							th:href="@{/post/listPostByClassCode(classCode=${postClassList.code})}"></a></li>
					</tr>
				</ul>
			</div>
			<div class="indexMain_left_con" id="postList">
				<tr th:each="post : ${page.result}">
					<div class="indexCon_msg">
						<div class="indexCon_msg_pic">
							<img src="/images/touxiang.jpg" />
						</div>
						<div class="indexCon_msg_detail">
							<a th:href="@{/post/getPostByCode(code=${post.code})}"
								target="_blank">
								<div class="indexCon_msg_detail_tittle">
									<span th:text="${post.className}"></span>
									<p th:text="${post.title}"></p>
								</div>
							</a>
							<div class="havePic" th:if="${post.icon}">
								<a href=""><div class="havePic_head">
										<img th:src="${'../img/read?path=' + post.icon}">
									</div></a>
							</div>
							<div class="indexCon_msg_detail_other">
								<ul>
									<li th:text="${post.userName}"></li>
									<li
										th:text="${#dates.format(post.createDate,'yyyy-MM-dd HH:mm:ss')}"></li>
									<li th:text="${post.readingAmount}"></li>
									<li th:text="${post.replyAmount}"></li>
								</ul>
							</div>
						</div>
						<div class="clear"></div>
					</div>
				</tr>
			</div>
			<div class="indexFooter">
				<!--   分页 -->
				<div class="container">
					<div>
						<ul style="padding-left: 5%;" id="page"></ul>
					</div>
				</div>
			</div>
		</div>
		<div class="indexMain_right">
			<div class="indexMain_rightCon">
				<a href="/index/write" class="newMsg">发新帖</a>
				<div class="pwfb">
					<div class="pwfbHead">BBS论坛</div>
					<div class="pwfbCon"></div>
					<div class="pwfbFooter"></div>
				</div>
				<div class="search">
					<!--
                    - 搜索帖子
                    - author：chenhuayang 2018/8/13
                    -->
					<div id="searching-post-result" class="searching-post-result">
						<input name="searchingDetails" id="searchingDetails" type="text"
							value="请输入检索内容" style="color: #9D9D9D;"
							onfocus="if(this.value == '请输入检索内容') { this.value = ''; this.style.color='#000000';}"
							onblur="if(this.value =='') { this.value = '请输入检索内容'; this.style.color='#9D9D9D';} ">
						<input name="searchingDetails0" id="searchingDetails0" type="Date"
							value="请输入检索内容" style="color: #9D9D9D;"
							onfocus="if(this.value == '请输入检索内容') { this.value = ''; this.style.color='#000000';}"
							onblur="if(this.value =='') { this.value = '请输入检索内容'; this.style.color='#9D9D9D';} ">
						<select name="searchingType" id="searchingType">
							<option value="1">搜帖子</option>
							<option value="2">搜作者</option>
							<option value="3">搜时间</option>
						</select> <input type="submit" class="searchingPoser" id="searchingPost"
							value="搜 索">
					</div>
				</div>
				<div class="indexPublic">
					<div class="indexPublic_head">本周热议</div>
					<div class="indexPublic_con">
						<ul class="weekHot">
							<tr th:each="PostOrderByList : ${session.PostOrderByList}">
								<li><a
									th:href="@{/post/getPostByCode(code=${PostOrderByList.code})}"
									th:text="${PostOrderByList.title}"></a><span
									th:text="${PostOrderByList.readingAmount}"></span></li>
							</tr>
						</ul>
					</div>
				</div>
				<div class="indexPublic">
					<div class="indexPublic_head">友情链接</div>
					<div class="indexPublic_con">
						<ul class="indexLink">
							<li><a href="https://www.baidu.com" target="_blank">百度</a></li>
							<li><a href="https://ienjoys.com/" target="_blank">智慧深圳市智慧享联网络技术有限公司</a></li>
							<li><a href="https://www.jb51.net" target="_blank">脚本之家</a></li>
							<li><a href="http://www.qq.com" target="_blank">腾讯首页</a></li>
							<li><a href="https://www.twitter.com/" target="_blank">推特</a></li>
							<li><a href="https://m.hujiang.com" target="_blank">沪江网校</a></li>
							<li><a href="https://hk.google.com" target="_blank">谷歌</a></li>
						</ul>
					</div>
				</div>
				<div class="indexWxpublic">
					<p>关注微信公众号</p>
				</div>
			</div>
		</div>
		<div class="clear"></div>
	</div>
	<footer class="publicFooter">
		<p>Copyrigh &copy; 深圳市智慧享联网络技术有限公司 版权所有 粤ICP备05144415-1</p>
	</footer>
</body>
</html>
<script>
    $(".indexMain_left_btn li a").click(function(){
        $(".indexMain_left_btn li a").removeClass("on");
        $(this).addClass("on");
    });
    window.onscroll=function(){
        var scrolls=document.body.scrollTop||document.documentElement.scrollTop;
        var slided=60;
        if(scrolls>=slided){
            $(".appear").hide();
            $(".navFix").show();
            $(".ltHead").addClass("navTop");
        }else{
            $(".appear").show();
            $(".navFix").hide();
            $(".ltHead").removeClass("navTop");
        }
    };
   /*  分页 */
$(function () {
    var currentPage = [[${page.pageNum}]];
    var totalPages = [[${page.pages}]];
    $("#page").bootstrapPaginator({
        bootstrapMajorVersion:3, //对应的bootstrap版本
        currentPage: currentPage, //当前页数
        numberOfPages: 8, //每次显示页数
        totalPages:totalPages, //总页数
        shouldShowPage:true,//是否显示该按钮
        useBootstrapTooltip:true,
        //点击事件
        onPageClicked: function (event, originalEvent, type, page) {
        	var currentClassCode = '[[${currentClassCode}]]';
        	 $.ajax({ 
       		 	type: "POST", 
       		     data:{
       		     	"currentPage": page,
       		     	"classCode": currentClassCode
       		     },
       		     dataType:"json",
       		     url: "/index/PostByClassCodeForJson",
       		     async: true, 
       		     success: function(data) {
       		    	var strHtml="";
      		    	 for(var i = 0;i<data.length;i++){
   	   		    	strHtml+=`<div class="indexCon_msg">
   	                <div class="indexCon_msg_pic"><img src="/images/touxiang.jpg"/></div>
   	                <div class="indexCon_msg_detail">
   	                    <a href="/post/getPostByCode?code=`+data[i]["code"]+`" target="_blank">
   	                        <div class="indexCon_msg_detail_tittle">
   	                            <span>`+data[i]["className"]+`</span>
   	                            <p>`+data[i]["title"]+`</p>
   	                        </div>
   	                    </a>`;
   	                    if(data[i]["icon"]!=null){
   	                    	strHtml+=`<div class="havePic">
   	                        <a href="">
   	                            <div class="havePic_head">
   	                         <img src="../img/read?path=`+data[i]["icon"]+`">
   	                            </div>
   	                        </a>
   	                    	</div>`;
   	                    }
   	                    
   	                    strHtml+=`<div class="indexCon_msg_detail_other">
   	                        <ul>
   	                            <li>`+data[i]["userName"]+`</li>
   	                            <li pattern="yyyy-MM-dd HH:mm:ss">`+data[i]["createDate"]+`</li>
   	                            <li>`+data[i]["readingAmount"]+`</li>
   	                            <li>`+data[i]["replyAmount"]+`</li>
   	                        </ul>
   	                    </div>
   	                </div>
   	                <div class="clear"></div>
   	            </div>`;
      		    	 }
      		    	 $("#postList").html(strHtml);
	       		 },
	 		     error: function(error){
	 		 		alert("错误了！！！"+page);
	 		 	 }
	 		 }); 
        }
    });
 });
</script>