<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <script type="text/javascript" th:src="@{/js/jquery-3.3.1.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/user/userDetail.js}"></script>
    <title>添加板块</title>
    <link href="/css/css.css" type="text/css" rel="stylesheet"/>
    <link href="/css/main.css" type="text/css" rel="stylesheet"/>
    <link href="/css/moduleCss.css" type="text/css" rel="stylesheet"/>
    <link rel="shortcut icon" href="/images/main/favicon.ico"/>
</head>
<body>
<!--main_top-->
<table width="99%" border="0" cellspacing="0" cellpadding="0" id="searchmain">
    <tr>
        <td width="99%" align="left" valign="top">您的位置：用户管理&nbsp;&nbsp;>&nbsp;&nbsp;添加板块</td>
    </tr>
    <tr>
        <td align="left" valign="top" id="addinfo">
            <a href="#" target="mainFrame" onFocus="this.blur()" class="add">板块管理</a>
        </td>
    </tr>
    <tr>
        <td align="left" valign="top">
            <form method="post" id="form" th:action="@{/module/insertModule}">
                <table width="100%" border="0" cellspacing="0" cellpadding="0" id="main-tab">
                    <tr onMouseOut="this.style.backgroundColor='#ffffff'"
                        onMouseOver="this.style.backgroundColor='#edf5ff'">
                        <td align="right" valign="middle" class="borderright borderbottom bggray">板块名称：</td>
                        <td align="left" valign="middle" class="borderright borderbottom main-for">
                            <input type="text" name="moduleName" class="text-word">
                        </td>
                    </tr>
                    <tr onMouseOut="this.style.backgroundColor='#ffffff'"
                        onMouseOver="this.style.backgroundColor='#edf5ff'">
                        <td align="right" valign="middle" class="borderright borderbottom bggray">版主：</td>
                        <td align="left" valign="middle" class="borderright borderbottom main-for">
                            <select style='width: 148.15px' name="tid" id="tid" th:field="*{listUser}">
                                <option th:each="user : ${listUser}" th:text="${user.userName}"
                                        th:value="${user.id}"></option>
                            </select>
                        </td>
                    </tr>
                    <tr onMouseOut="this.style.backgroundColor='#ffffff'"
                        onMouseOver="this.style.backgroundColor='#edf5ff'">
                        <td align="right" valign="middle" class="borderright borderbottom bggray">&nbsp;</td>
                        <td align="left" valign="middle" class="borderright borderbottom main-for">
                            <input type="button" value="确认添加" id="buttonsubmit" class="text-but">
                    </tr>
                </table>
            </form>
        </td>
    </tr>
</table>
</body>
<script type="text/javascript">
    $(function () {
        $("#buttonsubmit").click(function () {
            var tid = $("#tid").find("option:selected").val();
            var userName = $("#tid").find("option:selected").text();
            var moduleName = $("input[name='moduleName']").val();
            $.ajax({
                url: "/module/insertModule",
                type: "post",
                data: {"user1.id": tid, "user1.userName": userName, "moduleName": moduleName},
                success: function (data) {
                    alert("板块添加成功！")
                    location.href = "/module/selectAllModule";
                },
                error: function (e) {
                }
            });
        })
    })
</script>
</html>